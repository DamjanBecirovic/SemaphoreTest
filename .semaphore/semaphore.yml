version: v1.0
name: "\U0001F31F Fan-In/Fan-Out Pipeline"
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2004
fail_fast:
  stop:
    when: branch != 'main'
auto_cancel:
  running:
    when: branch != 'main'
  queued:
    when: branch = 'main'
blocks:
  - name: "\U0001F6E0️ Setup"
    dependencies: []
    task:
      jobs:
        - name: "\U0001F4E6 Install Dependencies"
          commands:
            - echo "Checking out code..."
            - echo "Installing project dependencies..."
            - echo "Setup completed successfully!"
            - mkdir .workflow_editor
            - echo "12345" > .workflow_editor/commit_sha.txt
            - artifact push workflow .workflow_editor/commit_sha.txt -d .workflow_editor/commit_sha.txt
  - name: "\U0001F9EA Unit Tests"
    dependencies:
      - "\U0001F6E0️ Setup"
    task:
      jobs:
        - name: "\U0001F7E2 Run Unit Tests"
          commands:
            - echo "Running unit test suite..."
            - echo "Unit tests passed successfully!"
  - name: "\U0001F50D Integration Tests"
    dependencies:
      - "\U0001F6E0️ Setup"
    task:
      jobs:
        - name: "\U0001F504 Run Integration Tests"
          commands:
            - echo "Setting up test database..."
            - echo "Running integration tests..."
            - echo "Integration tests passed successfully!"
  - name: "\U0001F310 E2E Tests"
    dependencies:
      - "\U0001F6E0️ Setup"
    task:
      jobs:
        - name: "\U0001F3AD Run E2E Tests"
          commands:
            - echo "Starting test environment..."
            - echo "Running end-to-end tests..."
            - echo "E2E tests passed successfully!"
  - name: ✨ Code Quality
    dependencies:
      - "\U0001F6E0️ Setup"
    task:
      jobs:
        - name: "\U0001F50D Lint"
          commands:
            - echo "Running code linting..."
            - echo "Linting passed successfully!"
        - name: "\U0001F4CA Type Check"
          commands:
            - echo "Running type checks..."
            - echo "Type checking passed successfully!"
  - name: "\U0001F510 Security"
    dependencies:
      - "\U0001F6E0️ Setup"
    task:
      jobs:
        - name: "\U0001F6E1️ Security Scan"
          commands:
            - echo "Scanning dependencies..."
            - echo "Running security checks..."
            - echo "Security scan completed successfully!"
  - name: "\U0001F4E6 Build"
    dependencies:
      - "\U0001F9EA Unit Tests"
      - "\U0001F50D Integration Tests"
      - "\U0001F310 E2E Tests"
      - ✨ Code Quality
      - "\U0001F510 Security"
    task:
      jobs:
        - name: "\U0001F528 Build Production"
          commands:
            - echo "Building production assets..."
            - echo "Optimizing build..."
            - echo "Build completed successfully!"
  - name: "\U0001F680 Deploy"
    dependencies:
      - "\U0001F4E6 Build"
    task:
      jobs:
        - name: "\U0001F30D Deploy to Production"
          commands:
            - echo "Preparing deployment..."
            - echo "Running deployment checks..."
            - echo "Deploying to production..."
            - echo "Deployment completed successfully!"
